[Trait, WithForeign]
interface Shell {
  void handle_effects(bytes requests);
};

namespace shared {
  void new(Shell shell);

  bytes process_event([ByRef] bytes msg);
  bytes handle_response(u32 id, [ByRef] bytes res);
  bytes view();
};
